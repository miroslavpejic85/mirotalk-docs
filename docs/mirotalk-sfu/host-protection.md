# Host protection

![mirotalksfu-hp](../images/mirotalksfu-hp.png)

In the configuration file `.env`, you can enable security measures for your video conferencing room using the following parameters:

- `HOST_PROTECTED`: Set to `true` to require the host to provide a valid username and password during room initialization. Default is `false`.
- `HOST_USER_AUTH`: Set to `true` to enable user authentication for hosts. Default is `false`.
- `HOST_USERS`: Define host users in the format: username:password:displayName:allowedRooms (room1,room2...)

Example Configuration:

```bash
HOST_PROTECTED=true
HOST_USER_AUTH=false
HOST_USERS="user1:pass1:user-1:*|user2@mail.com:pass2:user-2:*|user3:pass3:user-3:*"
```

---

## Host Protection Logic:

If `HOST_PROTECTED` is set to `true`, the following logic applies:

1. Host login with username and password is required.
2. Upon successful login, the IP is saved as a valid authentication IP.
3. After authentication, the host can create a room, join a room, and share the room link.
4. All guests can join until the host logs out.
5. When the host leaves the room or exits the browser, their IP is removed from valid auth IPs to prevent unauthorized access.
6. To access it again, the host needs to provide a username and password.

If `HOST_USER_AUTH` is set to `true`, additional authentication is required.

---

## Token

The `token` will be stored in your browser's `window.sessionStorage.peer_token` with a default expiration time of `1 hour`, which can be specified in the `env` file -> `JWT_EXPIRATION` or generated by [API](./api.md)

---

## Room Initialization

To bypass the login page and join a room, use the following URL with parameters:

- [https://YOUR-DOMAIN-NAME/join/?room=test&token=token](https://sfu.mirotalk.com/join/?room=test&token=token)

---

## Participant Room Entry

### When `host.protected` is enabled:

Participants can join after host authentication using the URL path:

- [https://sfu.mirotalk.com/join/test](https://sfu.mirotalk.com/join/test)

Alternatively, use query parameters for additional settings:

- [https://YOUR-DOMAIN-NAME/join/?room=test&roomPassword=0&name=mirotalksfu&audio=0&video=0&screen=0&notify=0](https://sfu.mirotalk.com/join/?room=test&roomPassword=0&name=mirotalksfu&audio=0&video=0&screen=0&notify=0)

---

## User Authentication for Participants:

### When `host.user_auth` is enabled:

Participants will be prompted to log in before accessing the room

![user-auth](../images/user-auth.png)

Participants can also join by directly accessing the URL path, bypassing the need for login credentials using the URL path:

- [https://YOUR-DOMAIN-NAME/join/?room=test&token=token](https://sfu.mirotalk.com/join/?room=test&token=token)

Alternatively, use query parameters for additional participant settings:

- [https://YOUR-DOMAIN-NAME/join/?room=test&name=mirotalk&audio=0&video=0&screen=0&notify=0&token=token](https://sfu.mirotalk.com/join/?room=test&name=mirotalk&audio=0&video=0&screen=0&notify=0&token=token)

---
